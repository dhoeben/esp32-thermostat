binary_sensor:
  # Encoder button
  - platform: gpio
    id: enc_switch
    name: "Rotary Encoder Button"
    pin:
      number: !secret pin_enc_sw
      mode:
        input: true
        pullup: true
      inverted: true  
    on_press:
      - logger.log: "Rotary encoder switch pressed"

  # Low battery warning
  - platform: template
    id: low_battery
    name: "Low Battery"
    icon: mdi:battery-alert-variant-outline
    device_class: battery
    entity_category: diagnostic
    lambda: |-
      if (isnan(id(battery_percent).state)) return {};
      return (id(battery_percent).state < 15.0);
    filters:
      - delayed_on: 5min
      - delayed_off: 10min